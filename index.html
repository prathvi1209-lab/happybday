<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy Birthday Anushka ðŸŽ‰</title>
<style>
body { margin:0; padding:0; overflow:hidden; background:#87CEEB; font-family:Arial; }
canvas { display:block; position:absolute; top:0; left:0; }
#clickStart {
  position:fixed; top:0; left:0; width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
  color:white; font-size:2rem; background:rgba(0,0,0,0.3); cursor:pointer; z-index:5;
}
</style>
</head>
<body>

<audio id="song"><source src="aud.mp3" type="audio/mpeg"></audio>
<div id="clickStart">Click anywhere to start ðŸŽ‰</div>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const song = document.getElementById('song');
const clickStart = document.getElementById('clickStart');

// Balloon
let balloon = {x:100, y:canvas.height-150, r:25, popped:false};
let night = false;

// Fireworks
let fireworks = [];

// Text visibility control
let showText = false;

// Start animation
clickStart.addEventListener('click', ()=>{
  clickStart.style.display='none';
  song.play();
  animate();
  setTimeout(()=>{showText=true;},1500);
  setTimeout(startFireworks,1000);
});

// Draw everything
function draw(){
  // Background
  ctx.fillStyle = night ? '#0a0a2a' : '#87CEEB';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // Boy
  ctx.fillStyle='#0000ff';
  ctx.fillRect(100, canvas.height-150,50,100);
  // Girl
  ctx.fillStyle='#ff00ff';
  ctx.fillRect(canvas.width-150, canvas.height-150,50,100);

  // Balloon
  if(!balloon.popped){
    ctx.fillStyle='red';
    ctx.beginPath();
    ctx.arc(balloon.x, balloon.y, balloon.r,0,Math.PI*2);
    ctx.fill();
    // String
    ctx.strokeStyle='black';
    ctx.beginPath();
    ctx.moveTo(balloon.x, balloon.y);
    ctx.lineTo(125, canvas.height-150);
    ctx.stroke();
  }

  // Night sky
  if(night){
    // Moon
    ctx.fillStyle='#fdf6c3';
    ctx.beginPath();
    ctx.arc(canvas.width-150,150,50,0,Math.PI*2);
    ctx.fill();
    // Stars
    for(let i=0;i<50;i++){
      ctx.fillStyle='#fff';
      ctx.beginPath();
      ctx.arc(Math.random()*canvas.width, Math.random()*canvas.height/2,2,0,Math.PI*2);
      ctx.fill();
    }
  }

  // Fireworks
  fireworks.forEach((fw,i)=>{
    fw.particles.forEach(p=>{
      p.x += Math.cos(p.angle)*p.speed;
      p.y += Math.sin(p.angle)*p.speed;
      ctx.fillStyle=`rgba(${fw.color.r},${fw.color.g},${fw.color.b},0.8)`;
      ctx.beginPath();
      ctx.arc(p.x,p.y,2,0,Math.PI*2);
      ctx.fill();
    });
    fw.life--;
    if(fw.life<=0) fireworks.splice(i,1);
  });

  // Draw Birthday Text + Letter inside canvas
  if(showText){
    ctx.fillStyle='#ff6699';
    ctx.font='60px Brush Script MT, cursive';
    ctx.textAlign='center';
    ctx.fillText('Happy 16th Birthday Anushka ðŸŽ‰', canvas.width/2, 150);

    // Letter text
    ctx.fillStyle='#fff';
    ctx.font='20px Courier New';
    const note = "Hey Anushka, I hope this will be your best birthday ever. " +
                 "Hope we can celebrate it together, but we can't right now. I miss you. Yours, AVII ðŸ’–";
    wrapText(ctx, note, canvas.width/2-250, canvas.height-150, 500, 25);
  }
}

// Function to wrap text inside canvas
function wrapText(context, text, x, y, maxWidth, lineHeight){
  const words = text.split(' ');
  let line = '';
  for(let n = 0; n < words.length; n++){
    const testLine = line + words[n] + ' ';
    const metrics = context.measureText(testLine);
    const testWidth = metrics.width;
    if(testWidth > maxWidth && n > 0){
      context.fillText(line, x + maxWidth/2, y);
      line = words[n] + ' ';
      y += lineHeight;
    } else {
      line = testLine;
    }
  }
  context.fillText(line, x + maxWidth/2, y);
}

// Animate balloon and scene
function animate(){
  if(!balloon.popped){
    balloon.x +=3;
    balloon.y -=2;
    if(balloon.x>=canvas.width-125){
      balloon.popped=true;
      night=true;
    }
  }
  draw();
  requestAnimationFrame(animate);
}

// Fireworks generator
function startFireworks(){
  setInterval(()=>{
    const fw = {x:Math.random()*canvas.width, y:Math.random()*canvas.height/2, life:60, particles:[], color:{r:Math.random()*255,g:Math.random()*255,b:Math.random()*255}};
    for(let i=0;i<50;i++){
      fw.particles.push({x:fw.x, y:fw.y, angle:Math.random()*Math.PI*2, speed:Math.random()*4+1});
    }
    fireworks.push(fw);
  },800);
}
</script>
</body>
</html>
